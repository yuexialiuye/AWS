# 第十四周
# 透過cloudfront連接網頁
> 創建S3儲存桶
```sh
到S3頁面
Create bucket
Bucket name : test-lily
Create bucket
創建一個網頁，放進bucket裡
```
> 創建cloudfront
```sh
到cloudfront頁面
Create distribution
Origin domain : 選擇剛剛創建的test-lily.s3.us-east-1.amazonaws.com
Origin access :選擇Origin access control settings (recommended)
Create control setting
名字改成test-lily
Create
Web Application Firewall (WAF) 
Do not enable security protections
Settings
Default root object : index.html
Create distribution

點擊copy policy
回到s3頁面，進入剛剛創建的test-lily
Permissions
Bucket policy
Edit
貼上剛剛複製的policy
Save changes

回到cloudfront頁面，等待Last modified狀態從Deploying變成時間
複製cloudfront的Domain name在瀏覽器開啟
```
<img src="../pic/1219.png">

# 擋某個特定IP
> 建立被擋IP
```sh
在瀏覽器打myip，查詢自己的ip位置，複製
到WAF & Shield頁面
IP sets
Create IP set
IP set name : MyIPSet
Region :　Global (CloudFront)　(如果沒出現就先做下面建立web ACL的動作，做到選擇Ip Set再回來設置)
IP addresses : 貼上剛剛複製的IP位置，後面加/32
Create IP set
```

> 建立Web ACL
```sh
Web ACLs
Create web ACL
選擇Amazon CloudFront distributions
Name : MyWebACL
Associated AWS resources
Add AWS resources
勾選剛剛創建的cloudfront
Add
Next

Rules
Add rules
Add my own rules and rule groups
選擇IP set
Name: MyRule
IP set : 選擇MyIPSet
Add rule
Next
Next
Create web ACL

重新整理剛剛cloudfront的domain name網頁
```
<img src="../pic/1219-1.png">

# 擋惡意攻擊(五分鐘連線超過100次)
> 建立Web ACL
```sh
到WAF & Shield頁面
若有其他規則，先刪除(如剛剛擋ip的規則)
```
<img src="../pic/1219-2.png">
